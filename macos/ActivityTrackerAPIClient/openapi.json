{ "info": { "title": "Activity Tracker API", "version": "v0.0.1" }, "openapi": "3.0.0", "servers": [ { "url": "http://localhost:8787/", "description": "Local development server" } ], "security": [ { "bearerAuth": [] } ], "components": { "securitySchemes": { "bearerAuth": { "type": "http", "scheme": "bearer" } }, "schemas": { "Provider": { "type": "string", "enum": [ "google" ] }, "Account": { "type": "object", "properties": { "id": { "type": "string" }, "provider": { "$ref": "#/components/schemas/Provider" }, "createdAt": { "type": "string" }, "calendarId": { "type": "string", "nullable": true }, "active": { "type": "boolean" }, "email": { "type": "string", "format": "email" } }, "required": [ "id", "provider", "createdAt", "calendarId", "active", "email" ] }, "User": { "type": "object", "properties": { "id": { "type": "string" }, "createdAt": { "type": "string" }, "givenName": { "type": "string" }, "familyName": { "type": "string" }, "displayName": { "type": "string" }, "picture": { "type": "string", "nullable": true, "format": "uri" }, "accounts": { "type": "array", "items": { "$ref": "#/components/schemas/Account" } } }, "required": [ "id", "createdAt", "givenName", "familyName", "displayName", "picture", "accounts" ] }, "Calendar": { "type": "object", "properties": { "color": { "type": "string" }, "id": { "type": "string" }, "description": { "type": "string" }, "writeAccess": { "type": "boolean" }, "title": { "type": "string" }, "accountId": { "type": "string" } }, "required": [ "color", "id", "writeAccess", "title", "accountId" ] }, "Event": { "type": "object", "properties": { "id": { "type": "string" }, "title": { "type": "string" }, "description": { "type": "string" }, "start": { "type": "string" }, "end": { "type": "string" }, "allDay": { "type": "boolean" }, "transparent": { "type": "boolean" }, "url": { "type": "string", "format": "uri" }, "accountId": { "type": "string" } }, "required": [ "id", "title", "start", "allDay", "transparent", "accountId" ] } }, "parameters": {} }, "paths": { "/": { "get": { "tags": [ "Application" ], "operationId": "ping", "responses": { "200": { "description": "Ping the server", "content": { "application/json": { "schema": { "type": "object", "properties": { "beep": { "type": "string", "enum": [ "boop" ] } }, "required": [ "beep" ] } } } } } } }, "/auth/login/:provider": { "get": { "tags": [ "Authentication" ], "operationId": "login", "parameters": [ { "schema": { "$ref": "#/components/schemas/Provider" }, "required": true, "name": "provider", "in": "path" }, { "schema": { "type": "boolean", "nullable": true }, "required": false, "name": "external", "in": "query" } ], "responses": { "302": { "description": "Redirect to the provider's login page", "headers": { "Location": { "schema": { "type": "string" }, "required": true } } }, "500": { "description": "Internal server error", "content": { "application/json": { "schema": { "type": "object", "properties": { "error": { "type": "string" } }, "required": [ "error" ] } } } } } } }, "/auth/refresh": { "post": { "tags": [ "Authentication" ], "operationId": "refreshAccessToken", "requestBody": { "content": { "application/json": { "schema": { "type": "object", "properties": { "refreshToken": { "type": "string" } }, "required": [ "refreshToken" ] } } } }, "responses": { "201": { "description": "Refreshed access token", "content": { "application/json": { "schema": { "type": "object", "properties": { "accessToken": { "type": "string" } }, "required": [ "accessToken" ] } } } }, "500": { "description": "Internal server error", "content": { "application/json": { "schema": { "type": "object", "properties": { "error": { "type": "string" } }, "required": [ "error" ] } } } } } } }, "/me": { "get": { "tags": [ "Application" ], "operationId": "getCurrentUser", "responses": { "200": { "description": "Get the current user", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/User" } } } } } } }, "/calendars": { "get": { "tags": [ "Calendars" ], "operationId": "listCalendars", "responses": { "200": { "description": "List calendars from all accounts", "content": { "application/json": { "schema": { "type": "array", "items": { "$ref": "#/components/schemas/Calendar" } } } } }, "500": { "description": "Internal server error", "content": { "application/json": { "schema": { "type": "object", "properties": { "error": { "type": "string" } }, "required": [ "error" ] } } } } } } }, "/accounts/{accountId}/calendars": { "post": { "tags": [ "Calendars" ], "operationId": "createCalendar", "parameters": [ { "schema": { "type": "string", "minLength": 1 }, "required": true, "name": "accountId", "in": "path" } ], "requestBody": { "content": { "application/json": { "schema": { "type": "object", "properties": { "title": { "type": "string", "minLength": 1 } }, "required": [ "title" ] } } } }, "responses": { "201": { "description": "Created calendar", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/Calendar" } } } }, "404": { "description": "Account not found", "content": { "application/json": { "schema": { "type": "object", "properties": { "error": { "type": "string", "enum": [ "account_not_found" ] } }, "required": [ "error" ] } } } }, "500": { "description": "Internal server error", "content": { "application/json": { "schema": { "type": "object", "properties": { "error": { "type": "string" } }, "required": [ "error" ] } } } } } } }, "/accounts/{accountId}/calendars/{calendarId}": { "get": { "tags": [ "Calendars" ], "operationId": "getCalendar", "parameters": [ { "schema": { "type": "string", "minLength": 1 }, "required": true, "name": "accountId", "in": "path" }, { "schema": { "type": "string", "minLength": 1 }, "required": true, "name": "calendarId", "in": "path" } ], "responses": { "200": { "description": "Calendar found", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/Calendar" } } } }, "404": { "description": "Resource not found", "content": { "application/json": { "schema": { "type": "object", "properties": { "error": { "type": "string", "enum": [ "calendar_not_found", "account_not_found" ] } }, "required": [ "error" ] } } } }, "500": { "description": "Internal server error", "content": { "application/json": { "schema": { "type": "object", "properties": { "error": { "type": "string" } }, "required": [ "error" ] } } } } } } }, "/accounts/{accountId}/calendars/{calendarId}/choose": { "post": { "tags": [ "Calendars" ], "operationId": "chooseCalendar", "parameters": [ { "schema": { "type": "string", "minLength": 1 }, "required": true, "name": "accountId", "in": "path" }, { "schema": { "type": "string", "minLength": 1 }, "required": true, "name": "calendarId", "in": "path" } ], "responses": { "201": { "description": "Choose calendar" }, "404": { "description": "Resource not found", "content": { "application/json": { "schema": { "type": "object", "properties": { "error": { "type": "string", "enum": [ "calendar_not_found", "account_not_found" ] } }, "required": [ "error" ] } } } }, "500": { "description": "Internal server error", "content": { "application/json": { "schema": { "type": "object", "properties": { "error": { "type": "string" } }, "required": [ "error" ] } } } } } } }, "/events": { "get": { "tags": [ "Events" ], "operationId": "listEvents", "parameters": [ { "schema": { "type": "string" }, "required": false, "name": "from", "in": "query" }, { "schema": { "type": "string" }, "required": false, "name": "to", "in": "query" } ], "responses": { "200": { "description": "List events from all accounts", "content": { "application/json": { "schema": { "type": "array", "items": { "$ref": "#/components/schemas/Event" } } } } }, "500": { "description": "Internal server error", "content": { "application/json": { "schema": { "type": "object", "properties": { "error": { "type": "string" } }, "required": [ "error" ] } } } } } } }, "/accounts/{id}": { "delete": { "tags": [ "Accounts" ], "operationId": "disconnectAccount", "parameters": [ { "schema": { "type": "string" }, "required": true, "name": "id", "in": "path" } ], "responses": { "204": { "description": "Account disconnected successfully" }, "404": { "description": "Account not found", "content": { "application/json": { "schema": { "type": "object", "properties": { "error": { "type": "string" } }, "required": [ "error" ] } } } }, "500": { "description": "Internal server error", "content": { "application/json": { "schema": { "type": "object", "properties": { "error": { "type": "string" } }, "required": [ "error" ] } } } } } } } } }
